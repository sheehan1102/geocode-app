<h1>Let's Geocode!</h1>

<form id="location-form">
  <div id="location-form-errors"></div>

  <label for="address_one">Address</label>
  <input type="text" name="address_one" id="address_one" />

  <label for="address_two">Address #2</label>
  <input type="text" name="address_two" id="address_two" />

  <label for="city">City</label>
  <input type="text" name="city" name="city" id="city" />

  <label for="state">State</label>
  <input type="text" name="state" name="state" id="state" />

  <label for="zip">Postal code</label>
  <input type="text" name="zip" name="zip" id="zip" >

  <button type="submit">Geocode!</button>
</form>


<table id="locations-table">
  <% @locations.each do |l| %>
    <tr>
      <td><%= l.full_text_address %></td>
      <td><%= "Coordinates: #{l.lat}, #{l.long}" %></td>
    </tr>
  <% end %>
</table>



<script type="text/javascript">
  $(document).ready(function() {
    $('#location-form').on('submit', function (e) {
      e.preventDefault();

      var form = new FormSubmission;
      var errors = form.formValidation();

      if (errors.length > 0) {
        form.invalidFormSubmission(errors);
      } else {
        form.validFormSubmission();
      }
    });
   });
</script>